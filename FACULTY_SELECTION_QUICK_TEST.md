# Faculty Selection Schedule - Quick Visual Test Guide ??

## ?? 2-Minute Test

### Step 1: Disable Faculty Selection (Admin Side)
1. Login as CSEDS admin: `cseds@rgmcet.edu.in`
2. Navigate to CSEDS Dashboard
3. Click **"Faculty Selection Schedule"** card
4. Toggle **"Faculty Selection"** to **OFF**
5. Click **"Save Changes"**
6. Wait for success message

**Expected Result:**
```
? Success! Schedule updated successfully
Current Status: DISABLED ?
```

---

### Step 2: Check Student Dashboard
1. **Open a new browser window** (incognito mode)
2. Login as CSEDS student (any CSEDS student account)
3. You should land on the Main Dashboard

**Expected Result - Dashboard Should Show:**

```
??????????????????????????????????????????????????????
? ? Faculty Selection Closed                         ?
?                                                     ?
? Faculty selection is currently disabled.           ?
? Please check back later.                           ?
??????????????????????????????????????????????????????

Dashboard Cards:

????????????????   ????????????????   ????????????????
?   Profile    ?   ?   Subject    ?   ? My Subjects  ?
?              ?   ?  Selection   ?   ?              ?
?              ?   ? (GRAYED OUT) ?   ?              ?
?  [View] ?   ?   ? [Disabled] ??   ?  [View] ?   ?
????????????????   ????????????????   ????????????????
     Works            Disabled           Works
```

**Visual Indicators:**
- ? Red alert banner at top
- ? "Select Subject" card has reduced opacity (looks faded)
- ? Button says "Currently Unavailable" (grayed out)
- ? Clicking the card does nothing

---

### Step 3: Try Direct URL Access
1. While still logged in as student
2. Manually type in browser: `http://localhost:5000/Student/SelectSubject`
3. Press Enter

**Expected Result:**
- ? You are redirected BACK to Main Dashboard
- ? Error message appears: "Faculty selection is currently disabled. Please check back later."
- ? You CANNOT see the faculty selection page

```
??????????????????????????????????????????????????????
? ?? Faculty selection is currently disabled.        ?
?    Please check back later.                        ?
??????????????????????????????????????????????????????
```

---

### Step 4: Re-enable Faculty Selection (Admin Side)
1. Go back to admin window
2. On Faculty Selection Schedule page
3. Toggle **"Faculty Selection"** to **ON**
4. Click **"Save Changes"**

**Expected Result:**
```
? Success! Schedule updated successfully
Current Status: ACTIVE ?
```

---

### Step 5: Check Student Dashboard Again
1. Go back to student window
2. Refresh the page (F5)

**Expected Result - Dashboard Should Now Show:**

```
??????????????????????????????????????????????????????
? ? Faculty Selection Available                      ?
?                                                     ?
? Always Available                                   ?
??????????????????????????????????????????????????????

Dashboard Cards:

????????????????   ????????????????   ????????????????
?   Profile    ?   ?   Subject    ?   ? My Subjects  ?
?              ?   ?  Selection   ?   ?              ?
?              ?   ?  (ENABLED)   ?   ?              ?
?  [View] ?   ?   ? [Select] ?  ?   ?  [View] ?   ?
????????????????   ????????????????   ????????????????
     Works            Works!            Works
```

**Visual Indicators:**
- ? Green alert banner at top
- ? "Select Subject" card is fully visible (normal opacity)
- ? Button says "Select Now" (active blue/gold gradient)
- ? Clicking the card navigates to faculty selection page

---

### Step 6: Verify Faculty Selection Page Access
1. Click **"Select Now"** button on the "Select Subject" card

**Expected Result:**
- ? You are taken to `/Student/SelectSubject` page
- ? You can see available subjects and faculty
- ? You can enroll in subjects

```
??????????????????????????????????????????????????????
? ?? Select Faculty                                  ?
?                                                    ?
? K Sireesha | Year: III Year | Department: CSE(DS) ?
??????????????????????????????????????????????????????

Subjects Available:
????????????  ????????????  ????????????
?   FSD    ?  ?    OS    ?  ?    ML    ?
?          ?  ?          ?  ?          ?
? Faculty  ?  ? Faculty  ?  ? Faculty  ?
?  List    ?  ?  List    ?  ?  List    ?
????????????  ????????????  ????????????
```

---

## ?? Visual Comparison

### DISABLED State (Schedule OFF)
```
Main Dashboard:
???????????????????????????????????????????
? ? RED ALERT                             ? ? Red background
? Faculty Selection Closed                ?
? [Custom message from admin]             ?
???????????????????????????????????????????

???????????????????????
?  Select Subject     ?
?  (Grayed Out 60%)   ? ? Reduced opacity
?                     ?
? [Currently          ? ? Disabled button
?  Unavailable]       ? (gray, no hover)
???????????????????????
```

### ENABLED State (Schedule ON)
```
Main Dashboard:
???????????????????????????????????????????
? ? GREEN ALERT                           ? ? Green background
? Faculty Selection Available             ?
? [Status description]                    ?
???????????????????????????????????????????

???????????????????????
?  Select Subject     ?
?  (Fully Visible)    ? ? Normal opacity
?                     ?
? [Select Now]        ? ? Active button
?                     ? (blue-gold gradient)
???????????????????????
```

---

## ?? Advanced Tests

### Test A: Schedule Time Window

**Setup:**
1. Admin sets:
   - IsEnabled: ON
   - UseSchedule: ON
   - Start: [Current Date] 11:00 AM
   - End: [Current Date] 11:30 AM

**Test:**
- **Before 11:00 AM:** ? Student sees RED alert, disabled card
- **Between 11:00-11:30 AM:** ? Student sees GREEN alert, enabled card
- **After 11:30 AM:** ? Student sees RED alert, disabled card

---

### Test B: Custom Message

**Setup:**
1. Admin sets:
   - IsEnabled: OFF
   - Custom Message: "Faculty selection opens on January 15th at 10:00 AM. Get ready!"

**Test:**
- Student sees exactly that message in:
  - ? Red alert banner on dashboard
  - ? TempData error if trying direct URL access

---

### Test C: API Bypass Prevention

**Test (for developers):**
1. Disable faculty selection (admin)
2. Login as student
3. Open Browser DevTools (F12)
4. Go to Console tab
5. Try direct POST:
   ```javascript
   fetch('/Student/SelectSubject', {
       method: 'POST',
       headers: {
           'Content-Type': 'application/x-www-form-urlencoded',
           'RequestVerificationToken': document.querySelector('input[name="__RequestVerificationToken"]')?.value
       },
       body: 'assignedSubjectId=1'
   }).then(r => r.text()).then(console.log)
   ```

**Expected Result:**
- ? Request returns redirect response
- ? No enrollment created
- ? Security check passed!

---

## ? Success Checklist

After testing, verify:

- [ ] Admin can toggle faculty selection ON/OFF
- [ ] Changes save successfully
- [ ] Student dashboard shows correct alert (red/green)
- [ ] "Select Subject" card enables/disables correctly
- [ ] Direct URL access is blocked when disabled
- [ ] Error message displays when blocked
- [ ] Re-enabling works immediately
- [ ] Faculty selection page accessible when enabled
- [ ] Enrollment works when enabled
- [ ] Enrollment blocked when disabled
- [ ] Custom messages display correctly
- [ ] Schedule time windows work correctly
- [ ] Other departments not affected

---

## ?? Troubleshooting

### Issue: Student can still access after disabling

**Check:**
1. Is the student in CSEDS department?
   ```sql
   SELECT Department FROM Students WHERE Email = '[student email]'
   ```

2. Does a schedule exist for CSEDS?
   ```sql
   SELECT * FROM FacultySelectionSchedules WHERE Department = 'CSEDS'
   ```

3. Is IsEnabled actually set to false?
   ```sql
   SELECT IsEnabled FROM FacultySelectionSchedules WHERE Department = 'CSEDS'
   ```

4. Clear browser cache and try again (Ctrl+Shift+Delete)

---

### Issue: Status not updating immediately

**Solution:**
- Refresh the student's browser (F5)
- Or logout and login again
- Database changes are immediate, but UI needs refresh

---

### Issue: Direct URL still works

**Check:**
- Is the code properly deployed?
- Is the app restarted after code changes?
- Check browser console for errors (F12 ? Console)

---

## ?? Screenshot Comparison

### Before Fix
```
Admin disables selection ? Student can still access ?
[Select Subject Page Shows Up]
```

### After Fix
```
Admin disables selection ? Student sees:
??????????????????????????????????
? ? Faculty Selection Closed    ?
? [Admin's message]              ?
??????????????????????????????????
[Disabled Card + Cannot Access] ?
```

---

## ?? Expected Timing

| Action | Expected Time |
|--------|--------------|
| Admin disables selection | < 1 second |
| Student refreshes dashboard | < 1 second |
| Status updates | Immediate |
| Try direct URL access | < 1 second (redirected) |
| Re-enable selection | < 1 second |
| Changes take effect | Immediate |

---

## ?? Success Indicators

When everything works correctly, you should see:

### Admin Side ?
- Toggle responds immediately
- Status banner updates (green/red)
- Impact statistics show correct numbers
- Save button works smoothly

### Student Side ?
- Alert banner matches schedule status
- Card enables/disables appropriately
- Button text changes correctly
- Direct access is blocked
- Error messages display clearly
- Re-enabling works instantly

---

## ?? Test Report Template

```
FACULTY SELECTION SCHEDULE TEST REPORT
Date: [Date]
Tester: [Name]

Test 1: Disable Selection
? Admin toggle OFF successful
? Student sees red alert
? Card is disabled
? Direct URL blocked

Test 2: Enable Selection
? Admin toggle ON successful
? Student sees green alert
? Card is enabled
? Can access selection page

Test 3: Schedule Window
? Before window: blocked
? During window: accessible
? After window: blocked

Test 4: Custom Message
? Message displays on dashboard
? Message displays on redirect

Overall Status: ? PASS  ? FAIL
Notes: [Add notes here]
```

---

**Testing Duration:** 2-5 minutes
**Complexity:** Easy
**Required:** 1 Admin account, 1 Student account
**Browser:** Any modern browser

**Happy Testing! ???**
